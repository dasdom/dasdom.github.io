I"Ï;<p>UIStackView was introduces with iOS 9. And from the beginning I loved it. UIStackViews allow to use Auto Layout without adding Auto Layout Constraints. And most of the times you get away with changing a few properties to achieve what you want. You need some time to get used to it though. So back when a beta of iOS 9 was available I created an <a href="https://github.com/dasdom/UIStackViewPlayground">Xcode Playground</a> to experiment with the new and shiny UIStackViews.</p>

<p>First I did some easy layouts like a calculator and a simple Twitter feed. But later I tried to recreate the look of the springboard with UIStackViews. Here is the result:</p>

<p style="text-align: center;"><img src="../assets/2018-12-25/01.png" alt="" /></p>

<p>Each App (the icon together with the title) is one stack view.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">appStackView</span> <span class="o">=</span> <span class="p">{</span> <span class="p">(</span><span class="nv">imageName</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIStackView</span> <span class="k">in</span>
    
    <span class="k">let</span> <span class="nv">imageView</span> <span class="o">=</span> <span class="kt">UIImageView</span><span class="p">(</span><span class="nv">image</span><span class="p">:</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="n">imageName</span><span class="p">))</span>
    <span class="n">imageView</span><span class="o">.</span><span class="n">widthAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalToConstant</span><span class="p">:</span> <span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">isActive</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">imageView</span><span class="o">.</span><span class="n">heightAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalToConstant</span><span class="p">:</span> <span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">isActive</span> <span class="o">=</span> <span class="kc">true</span>
        
    <span class="k">let</span> <span class="nv">subviews</span> <span class="o">=</span> <span class="p">[</span><span class="n">imageView</span><span class="p">,</span> <span class="nf">labelWithText</span><span class="p">(</span><span class="n">title</span><span class="p">)]</span>
    <span class="k">let</span> <span class="nv">stackView</span> <span class="o">=</span> <span class="kt">UIStackView</span><span class="p">(</span><span class="nv">arrangedSubviews</span><span class="p">:</span> <span class="n">subviews</span><span class="p">)</span>
    <span class="n">stackView</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="o">.</span><span class="n">vertical</span>
    <span class="n">stackView</span><span class="o">.</span><span class="n">distribution</span> <span class="o">=</span> <span class="o">.</span><span class="n">equalSpacing</span>
    <span class="n">stackView</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="n">stackView</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">calendarStackView</span> <span class="o">=</span> <span class="nf">appStackView</span><span class="p">(</span><span class="s">"calendar"</span><span class="p">,</span> <span class="s">"Calendar"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">photosStackView</span> <span class="o">=</span> <span class="nf">appStackView</span><span class="p">(</span><span class="s">"photos"</span><span class="p">,</span> <span class="s">"Photos"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">mapsStackView</span> <span class="o">=</span> <span class="nf">appStackView</span><span class="p">(</span><span class="s">"maps"</span><span class="p">,</span> <span class="s">"Maps"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">remindersStackView</span> <span class="o">=</span> <span class="nf">appStackView</span><span class="p">(</span><span class="s">"notes"</span><span class="p">,</span> <span class="s">"Reminders"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">healthStackView</span> <span class="o">=</span> <span class="nf">appStackView</span><span class="p">(</span><span class="s">"health"</span><span class="p">,</span> <span class="s">"Health"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">settingsStackView</span> <span class="o">=</span> <span class="nf">appStackView</span><span class="p">(</span><span class="s">"settings"</span><span class="p">,</span> <span class="s">"Settings"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">safariStackView</span> <span class="o">=</span> <span class="nf">appStackView</span><span class="p">(</span><span class="s">"safari"</span><span class="p">,</span> <span class="s">"Safari"</span><span class="p">)</span></code></pre></figure>

<p>The Calendar and the Health app are together a stack view as well as Photos and Settings.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">columnStackView</span> <span class="o">=</span> <span class="p">{</span> <span class="p">(</span><span class="nv">views</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIView</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">UIStackView</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">stackView</span> <span class="o">=</span> <span class="kt">UIStackView</span><span class="p">(</span><span class="nv">arrangedSubviews</span><span class="p">:</span> <span class="n">views</span><span class="p">)</span>
    <span class="n">stackView</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="o">.</span><span class="n">vertical</span>
    <span class="n">stackView</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">stackView</span><span class="o">.</span><span class="n">distribution</span> <span class="o">=</span> <span class="o">.</span><span class="n">fillEqually</span>
    <span class="k">return</span> <span class="n">stackView</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">firstColumnStackView</span> <span class="o">=</span> <span class="nf">columnStackView</span><span class="p">([</span><span class="n">calendarStackView</span><span class="p">,</span>
                                            <span class="n">healthStackView</span><span class="p">])</span>
<span class="k">let</span> <span class="nv">secondColumnStackView</span> <span class="o">=</span> <span class="nf">columnStackView</span><span class="p">([</span><span class="n">photosStackView</span><span class="p">,</span>
                                             <span class="n">settingsStackView</span><span class="p">])</span></code></pre></figure>

<p>The first two columns with apps and the two other apps are put into another stack view:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">appsStackView</span> <span class="o">=</span> <span class="kt">UIStackView</span><span class="p">(</span><span class="nv">arrangedSubviews</span><span class="p">:</span> <span class="p">[</span><span class="n">firstColumnStackView</span><span class="p">,</span>
                                                   <span class="n">secondColumnStackView</span><span class="p">,</span>
                                                   <span class="n">mapsStackView</span><span class="p">,</span>
                                                   <span class="n">remindersStackView</span><span class="p">])</span>
<span class="n">appsStackView</span><span class="o">.</span><span class="n">distribution</span> <span class="o">=</span> <span class="o">.</span><span class="n">fillEqually</span>
<span class="n">appsStackView</span><span class="o">.</span><span class="n">alignment</span> <span class="o">=</span> <span class="o">.</span><span class="n">top</span>
<span class="n">appsStackView</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="mi">15</span></code></pre></figure>

<p>Safari is in a stack view and together with the page control itâ€™s put into another stack view. The stack view with the apps is put into another stack view together with the time label:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">topStackView</span> <span class="o">=</span> <span class="kt">UIStackView</span><span class="p">(</span><span class="nv">arrangedSubviews</span><span class="p">:</span> <span class="p">[</span><span class="n">timeLabel</span><span class="p">,</span> <span class="n">appsStackView</span><span class="p">])</span>
<span class="n">topStackView</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="o">.</span><span class="n">vertical</span>
<span class="n">topStackView</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="mi">5</span></code></pre></figure>

<p>And then the top stack view is put into another stack view together with the info label and the stack view at the bottom with Safari and the page control. And this last stack view is added to the view as a sub view and it is arranged using normal Auto Layout Constraints.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">mainStackView</span> <span class="o">=</span> <span class="kt">UIStackView</span><span class="p">(</span><span class="nv">arrangedSubviews</span><span class="p">:</span> <span class="p">[</span><span class="n">topStackView</span><span class="p">,</span> <span class="n">infoLabel</span><span class="p">,</span> <span class="n">safariColumnStackView</span><span class="p">])</span>
<span class="n">mainStackView</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">mainStackView</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="o">.</span><span class="n">vertical</span>
<span class="n">mainStackView</span><span class="o">.</span><span class="n">distribution</span> <span class="o">=</span> <span class="o">.</span><span class="n">equalSpacing</span>
<span class="n">mainStackView</span><span class="o">.</span><span class="n">alignment</span> <span class="o">=</span> <span class="o">.</span><span class="n">center</span>

<span class="n">hostView</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">dockBackgroundView</span><span class="p">)</span>
<span class="n">hostView</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">mainStackView</span><span class="p">)</span>

<span class="kt">NSLayoutConstraint</span><span class="o">.</span><span class="nf">activate</span><span class="p">(</span>
  <span class="p">[</span>
    <span class="n">mainStackView</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">hostView</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="p">),</span>
    <span class="n">mainStackView</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">hostView</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="p">),</span>
    <span class="n">mainStackView</span><span class="o">.</span><span class="n">topAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">hostView</span><span class="o">.</span><span class="n">topAnchor</span><span class="p">,</span> <span class="nv">constant</span><span class="p">:</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">mainStackView</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">hostView</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="p">,</span> <span class="nv">constant</span><span class="p">:</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span>
    
    <span class="n">dockBackgroundView</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">hostView</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="p">),</span>
    <span class="n">dockBackgroundView</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">hostView</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="p">),</span>
    <span class="n">dockBackgroundView</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">hostView</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="p">),</span>
    <span class="n">dockBackgroundView</span><span class="o">.</span><span class="n">heightAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalToConstant</span><span class="p">:</span> <span class="mi">95</span><span class="p">),</span>
  <span class="p">])</span>
  </code></pre></figure>

<p>As you can see in this post, stack views become very powerful when you nest them. So, stack all the things!</p>

<p>Follow me on <a href="https://twitter.com/dasdom">Twitter</a> and browse through my other open source stuff on <a href="https://github.com/dasdom">Github</a>.</p>
:ET