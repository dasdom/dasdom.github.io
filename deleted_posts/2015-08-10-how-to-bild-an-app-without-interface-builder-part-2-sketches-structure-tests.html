---
layout: post
title: 'How To Bild An App Without Interface Builder - Part 2: Sketches, Structure,
  Tests'
date: 2015-08-10 17:27:58.000000000 +02:00
type: post
published: true
status: publish
categories:
- HowTo
tags:
- Code
- How To
- Interface Builder
- Sketches
- Structure
- Test
---
<p>This is part 2 of the blog series: <em>How To Build An App Without Interface Builder</em>. You can find information about this series <a href="http://swiftandpainless.com/how-to-bild-an-app-without-interface-builder-part-0/">here</a>. In the <a href="http://swiftandpainless.com/how-to-bild-an-app-without-interface-builder-part-1-setup/">previous post</a> we set up the project and removed the storyboard.</p>
<p>In part 2 we will see sketches of the app, we will discuss the structure of the project and we will create our first tests (remember, we try to stick with Test Driven Development (TDD) for this app).</p>
<h2>Sketches</h2>
<p>What should the app look like? I have doodled around a bit and came up with the following sketches (made using Paper by 53):<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/08/IMG_0094.jpg"><img src="{{ site.baseurl }}/assets/IMG_0094-300x225.jpg" alt="IMG_0094" width="300" height="225" class="aligncenter size-medium wp-image-828" /></a></p>
<p>The main view of the app is going to show a list. In the list are the birthdays of friends and family ordered by time until birthday. In the cells of the list is a progress indicator which color will be selectable in the input of the birthday.</p>
<!--more-->
<p>One cell will look like this:<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/08/IMG_0093.jpg"><img src="{{ site.baseurl }}/assets/IMG_0093-300x225.jpg" alt="IMG_0093" width="300" height="225" class="aligncenter size-medium wp-image-830" /></a></p>
<p>In front of the progress indicator will be the name and the date of the birthday. The name should change color depending on the progress.</p>
<p>The input view should look like this:<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/08/IMG_0095.jpg"><img src="{{ site.baseurl }}/assets/IMG_0095-300x225.jpg" alt="IMG_0095" width="300" height="225" class="aligncenter size-medium wp-image-831" /></a></p>
<p>Thats all for the sketches. You see the app is small and easy. But it's also a good foundation for extensions like a present planer or a mail composer for the birthday mail.</p>
<h2>Structure</h2>
<p>Usually I already have kind of a structure for apps I'm planning in my head. I also had ideas for the structure of this birthday app when I started to think about it. Most of the times I don't draw the structure. But drawing is actually a good way to make sure you haven't forgotten something and often you find better ways to do something. And it is a good reference for later in the project.</p>
<p>Here is the structure of this simple app.<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/08/Birthdays.png"><img src="{{ site.baseurl }}/assets/Birthdays.png" alt="Birthdays" width="922" height="496" class="aligncenter size-full wp-image-833" /></a></p>
<p>The structure of the project is very simple. We only have two controllers and a few other classes. The birthday list will be a table view because table views are very powerful and highly optimized on iOS. More on that later in this series.</p>
<p>At this stage we won't need communication with a server or Core Data to store the birthdays. We will serialize the data on disk.</p>
<h2>Test Driven Development</h2>
<p>We will use test driven development (or test-first development or TDD) for this app. This means we will first write the tests that describe what we expect to happen and then we write the code to make the tests pass. TDD is often divided in three phases, called Red, Green, Refactor.</p>
<h3>Red-Phase</h3>
<p>In the red phase you write the test for a micro feature without thinking about possible implementations. This is hard if you are new to this kind of development. As I am kind of a beginner in TDD as well I often have difficulties to not think about a special implementation. We are going to learn this together. :)</p>
<h3>Green-Phase</h3>
<p>In the green phase you write the simplest code that make the test pass. It doesn't matter if the code is good or bad. It doesn't matter if you are ashamed of the code you write in this phase. It's important that you only write code that makes the test green. Don't think about other features yet. Just make this one test pass.</p>
<h3>Refactoring-Phase</h3>
<p>Now that you have proven to have some usual code you can transform it to good code. You don't have to worry about the feature anymore because you have test that makes sure that the feature survives your refactoring. Do what ever is needed to transform the code in something you aren't ashamed of anymore. But make sure the test passes after you are finished. And don't forget to refactor the test code as well when needed.</p>
<h2>Your First Tests</h2>
<h3>What Tests Look Like?</h3>
<p>Now let's jump head in and write the first tests. Open <strong>BirthdaysTests.swift</strong> and add the following two methods below the <span class="lang:swift decode:true  crayon-inline ">tearDown()</span> method:</p>
<pre class="lang:swift decode:true ">func testExampleThatPasses() {
  XCTAssertEqual(1+1, 4-2, "Should both be 2")
}

func testExampleThatFails() {
  XCTAssertEqual(1+1, 4-1, "Should both be 2")
}</pre>
<p>The first is an example for a passing test and the second is an example for a failing test. Delete the other test methods, <span class="lang:swift decode:true  crayon-inline ">testExample()</span> and <span class="lang:swift decode:true  crayon-inline ">testPerformanceExample()</span>.</p>
<p>To run the tests either go to <strong>Product / Test</strong> or just hit âŒ˜U. You should see something like this:<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/08/Screen-Shot-2015-08-08-at-10.58.09.png"><img src="{{ site.baseurl }}/assets/Screen-Shot-2015-08-08-at-10.58.09.png" alt="Screen Shot 2015-08-08 at 10.58.09" width="687" height="137" class="aligncenter size-full wp-image-836" /></a></p>
<p>And now you can relate why the first two phases of TDD are called red and green phase. ;)</p>
<p>Obviously those test have nothing to do with the app we are trying to build. I have included them here in case you haven't seen a test before.</p>
<h2>The First Real Test</h2>
<p>Select the <strong>BirthdaysTests</strong> folder in Xcode an go to <strong>File / New / File...</strong>. Select <strong>iOS / Source / Unit Test Case Class</strong>, click <strong>Next</strong>, put in the name <strong>BirthdaysListViewControllerTests</strong> and make sure the language is set to Swift. Click <strong>Next</strong>. You are now asked where to store the file. In the lower left corner click <strong>New Folder</strong> and call it <strong>BirthdaysList</strong>. Click <strong>Create</strong> two times.</p>
<p>Now, delete <strong>BirthdaysTests.swift</strong>. The name is misleading because we won't put all our tests into one file. Ever!</p>
<p>Open <strong>BirthdaysListViewControllerTests.swift</strong> and delete the methods <span class="lang:swift decode:true  crayon-inline ">testExample()</span> and <span class="lang:swift decode:true  crayon-inline ">testPerformanceExample()</span>. In the file you see two other methods, <span class="lang:swift decode:true  crayon-inline ">setUp()</span> and <span class="lang:swift decode:true  crayon-inline ">tearDown()</span>. As the names suggest they are used to setup and tear down the test environment for each test.</p>
<p>Finally you are going to write a real test. First add the following line right below the import of <span class="lang:swift decode:true  crayon-inline ">XCTest</span>:</p>
<pre class="lang:swift decode:true ">@testable import Birthdays</pre>
<p>This import exposes the classes and methods in the Birthdays module to the tests target.</p>
<p>At the beginning of the <strong>BirthdaysListViewControllerTests</strong> class add the property <span class="lang:swift decode:true  crayon-inline ">var viewController: BirthdaysListViewController!</span>. The compiler will warn you that this class does not exists. True that. We'll fix this in a minute.</p>
<p>Add the following code at the end of <span class="lang:swift decode:true  crayon-inline ">setUp()</span>:</p>
<pre class="lang:swift decode:true ">viewController = BirthdaysListViewController()</pre>
<p>Add the following method to the end of the <strong>BirthdaysListViewControllerTests</strong> class:</p>
<pre class="lang:swift decode:true ">func testViewController_HasTableView() {
  XCTAssertNotNil(viewController.tableView)
}</pre>
<p>Run the tests. The tests fail. In fact Xcode even refuses to compile the project because it doesn't find the class <strong>BirthdaysListViewController</strong>. This was the red phase, let's move to the green phase:</p>
<p>Select the Birthdays folder in Xcode, select <strong>File / New / File...</strong>, chose <strong>iOS / Source / Cocoa Touch Class</strong>, click <strong>Next</strong>, put in the name <strong>BirthdaysListViewController</strong>, make it a subclass of <strong>UITableViewController</strong>, click <strong>Next</strong>, create a folder <strong>BirthdaysList</strong>. Click <strong>Create</strong> two times.</p>
<p>Run the test again. All green \o/! We have just test-driven a small part of the app.</p>
<p>The test is not very useful at this stage. But it still has some value. Remember that in TDD there will be a lot refactoring. This test makes sure that there will always be a property called <strong>tableView</strong>. So in case we decide that the data is better presented using a collection view, we first need to change the test and make it red again.</p>
<p>If you enjoyed this post, then make sure you subscribe to my <a href="http://swiftandpainless.com/feed">feed</a>.</p>
<p><a href="http://swiftandpainless.com/how-to-build-an-app-without-interface-builder-part-3-a-decision/">Part 3: A Decision</a></p>
