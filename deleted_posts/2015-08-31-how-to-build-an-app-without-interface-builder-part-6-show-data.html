---
layout: post
title: 'How To Build An App Without Interface Builder - Part 6: Show Data'
date: 2015-08-31 20:53:47.000000000 +02:00
type: post
published: true
status: publish
categories:
- HowTo
tags:
- How To
- Interface Builder
- Swift
- UITableViewCell
---
<p>In <a href="http://swiftandpainless.com/how-to-build-an-app-without-interface-builder-part-5-data-model/">part 5</a> we have seen how we can add birthdays to the app. But the data was just printed to the debug console.</p>
<p>In this post we want to implement that the birthdays we add are actually shown in the birthday list.</p>
<p>Open <span class="lang:swift decode:true  crayon-inline ">BirthdaysListDataProvider</span> and add the following property:</p>
<pre class="lang:swift decode:true ">private var birthdays = [Birthday]()</pre>
<p>Add the following code outside of the <span class="lang:swift decode:true  crayon-inline ">BirthdaysListDataProvider</span> class:</p>
<pre class="lang:swift decode:true ">extension BirthdaysListDataProvider {
  func addBirthday(birthday: Birthday) {
    birthdays.append(birthday)
  }
}</pre>
<p>Replace the code inside of</p>
<pre class="lang:swift decode:true ">tableView(_:numberOfRowsInSection:)</pre>
<p>with this:</p>
<pre class="lang:swift decode:true ">return birthdays.count</pre>
<!--more-->
<p>Replace the line <span class="lang:swift decode:true  crayon-inline ">cell.textLabel?.text = "Row: &#40;indexPath.row)"</span> with the following code:</p>
<pre class="lang:swift decode:true ">let birthday = birthdays[indexPath.row]
cell.textLabel?.text = birthday.firstName</pre>
<p>Now open <span class="lang:swift decode:true  crayon-inline ">BirthdaysListViewController</span> and add the following code in the body of the if clause of <span class="lang:swift decode:true  crayon-inline ">contactPicker(_:didSelectContact:)</span>:</p>
<pre class="lang:swift decode:true ">dataProvider?.addBirthday(person)
tableView.reloadData()</pre>
<p>Build and run. Tap the plus button and select John Appleseed. You should see something like this:<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/08/Simulator-Screen-Shot-30.08.2015-21.43.50.png"><img src="{{ site.baseurl }}/assets/Simulator-Screen-Shot-30.08.2015-21.43.50-200x300.png" alt="Simulator Screen Shot 30.08.2015 21.43.50" width="200" height="300" class="aligncenter size-medium wp-image-931" /></a></p>
<p>Great! Now we need a cell that actually can show the name of the person and his/her birthday. Let's add a first version of a custom table view cell. Remember, later we want to have a nice progress show in the cell behind the name. But for now it is enough to show the name and the birthday.</p>
<p>Select <strong>File / New / File...</strong>, chose <strong>iOS / Source / Cocoa Touch Class</strong>, click <strong>Next</strong>. Put in the name <strong>BirthdayCell</strong>, make it a subclass of <strong>UITableViewCell</strong> and click <strong>Next</strong>. Select the BirthdaysList folder and click <strong>Create</strong>. Open the new created class and remove the two methods from the Xcode template.</p>
<p>Add these two properties:</p>
<pre class="lang:swift decode:true ">let nameLabel: UILabel
let birthdayLabel: UILabel</pre>
<p>Xcode will complain that</p>
<blockquote><p>
  Class 'BirthdayCell' has no initializers
</p></blockquote>
<p>True. But we are going to change that. Add these two initializers:</p>
<pre class="lang:swift decode:true ">override init(style: UITableViewCellStyle, reuseIdentifier: String?) {
    
    nameLabel = UILabel()
    nameLabel.translatesAutoresizingMaskIntoConstraints = false
    
    birthdayLabel = UILabel()
    birthdayLabel.translatesAutoresizingMaskIntoConstraints = false
    
    super.init(style: style, reuseIdentifier: reuseIdentifier)
    
    addSubview(nameLabel)
    addSubview(birthdayLabel)
    
    let views = ["name": nameLabel, "birthday": birthdayLabel]
    var layoutConstraints = [NSLayoutConstraint]()
    
    layoutConstraints.append(nameLabel.centerXAnchor.constraintEqualToAnchor(centerXAnchor))
    layoutConstraints.append(nameLabel.centerYAnchor.constraintEqualToAnchor(centerYAnchor))
    layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("[birthday]-|", options: [], metrics: nil, views: views)
    layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("V:[birthday]|", options: [], metrics: nil, views: views)
    
    NSLayoutConstraint.activateConstraints(layoutConstraints)
  }

  required init?(coder aDecoder: NSCoder) {
      fatalError("init(coder:) has not been implemented")
  }</pre>
<p>The constrains in the initializer center the <span class="lang:swift decode:true  crayon-inline ">nameLabel</span> and put the <span class="lang:swift decode:true  crayon-inline ">birthdayLabel</span> at the bottom right corner. The second initializer is needed because it is a required initializer of <span class="lang:swift decode:true  crayon-inline ">UIView</span> and in Swift we need to implement all required initializer as soon as we implement one initializer ourselves.</p>
<p>No let's use our new shiny table view cell. Open <strong>BirthdaysListDataProvider.swift</strong> and replace in <span class="lang:swift decode:true  crayon-inline ">registerCellsForTableView(_:)</span> <span class="lang:swift decode:true  crayon-inline ">UITableViewCell.self</span> with <span class="lang:swift decode:true  crayon-inline ">BirthdayCell.self</span>.</p>
<p>Replace the code in <span class="lang:swift decode:true  crayon-inline ">tableView(_:cellForRowAtIndexPath:)</span> with this:</p>
<pre class="lang:swift decode:true ">let cell = tableView.dequeueReusableCellWithIdentifier(cellIdentifer, forIndexPath: indexPath) as! BirthdayCell

let birthday = birthdays[indexPath.row]
cell.nameLabel.text = birthday.firstName
cell.birthdayLabel.text = "\(birthday.birthday.day) \(birthday.birthday.month)"

return cell</pre>
<p>Build and run. Add a person to the list. The result should look like this:</p>
<p><a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/08/Simulator-Screen-Shot-31.08.2015-20.50.19.png"><img src="{{ site.baseurl }}/assets/Simulator-Screen-Shot-31.08.2015-20.50.19-200x300.png" alt="Simulator Screen Shot 31.08.2015 20.50.19" width="200" height="300" class="aligncenter size-medium wp-image-935" /></a></p>
<p>That's it for today. Next time we will make the table view cell nicer.</p>
