---
layout: post
title: Designing User Interfaces in Playgrounds
date: 2015-01-21 21:49:22.000000000 +01:00
type: post
published: true
status: publish
categories:
- Tips
tags:
- No Interface Builder
- playground
meta:
  _edit_last: '1'
  robotsmeta: index,follow
  _wpcom_is_markdown: '1'
author:
  login: dom
  email: dominik.hauser@dasdom.de
  display_name: dom
  first_name: ''
  last_name: ''
---
<p><strong>Note:</strong> Updated for Swift 2.0 and Xcode 7 beta 4</p>
<p>I have an on-off relationship with the Interface Builder. In the last projects I tried to use it and I like it a lot for prototyping. But the more complex a project gets the more I hate it. It does take to long to load and often I have to search for the one setting in the different inspectors to get what I want.</p>
<p>One of the thinks I miss, when I don't use the Interface Builder is the interface preview one get while working on the interface. I have started now to use Playgrounds for this.</p>
<p>Let's for this post assume you want to create a login screen for an app. Open a Playground and put in the code:</p>
<pre class="lang:swift decode:true ">import UIKit
import XCPlayground

let hostView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 480))

hostView.layer.borderWidth = 1
hostView.layer.borderColor = UIColor.grayColor().CGColor
hostView.backgroundColor = .whiteColor()

XCPShowView("Host View", view: hostView)
</pre>
<p>Go to <strong>View/Assistant Editor/Show Assistant Editor</strong>. You should see something like this:</p>
<p><a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/01/Screen-Shot-2015-07-28-at-21.55.35.png"><img src="{{ site.baseurl }}/assets/Screen-Shot-2015-07-28-at-21.55.35-217x300.png" alt="Screen Shot 2015-07-28 at 21.55.35" width="217" height="300" class="aligncenter size-medium wp-image-763" /></a></p>
<p>The app is going to have a navigation bar on the login screen. So add the following code at the end of the Playground:</p>
<pre class="lang:swift decode:true ">let navigationBar = UINavigationBar(frame: CGRect.zeroRect)
navigationBar.setTranslatesAutoresizingMaskIntoConstraints(false)
navigationBar.setItems([UINavigationItem(title: "Login")], animated: false)
hostView.addSubview(navigationBar)

let views = ["navigationBar": navigationBar]
var layoutConstraints = [NSLayoutConstraint]()
layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("|[navigationBar]|", options: [], metrics: nil, views: views)
layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("V:|[navigationBar(64)]", options: [], metrics: nil, views: views)
NSLayoutConstraint.activateConstraints(layoutConstraints)
</pre>
<p>In the Assistant Editor you should see this:</p>
<p><a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/01/Screen-Shot-2015-07-28-at-21.56.29.png"><img src="{{ site.baseurl }}/assets/Screen-Shot-2015-07-28-at-21.56.29-212x300.png" alt="Screen Shot 2015-07-28 at 21.56.29" width="212" height="300" class="aligncenter size-medium wp-image-764" /></a></p>
<p>To add a text field add the code</p>
<pre class="lang:swift decode:true ">let usernameTextField = UITextField(frame: CGRect.zeroRect)
usernameTextField.setTranslatesAutoresizingMaskIntoConstraints(false)
usernameTextField.placeholder = "Username"
usernameTextField.borderStyle = .Line

hostView.addSubview(usernameTextField)</pre>
<p>before the definition of the constrains. Change the constraints to</p>
<pre class="lang:swift decode:true ">let views = ["navigationBar": navigationBar, "usernameTextField": usernameTextField]
hostView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("|[navigationBar]|", options: nil, metrics: nil, views: views))
hostView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("|-[usernameTextField]-|", options: nil, metrics: nil, views: views))

hostView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("V:|[navigationBar(64)]-20-[usernameTextField(30)]", options: nil, metrics: nil, views: views))
</pre>
<p>The preview then looks like this:<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/01/Screen-Shot-2015-07-28-at-22.00.06.png"><img src="{{ site.baseurl }}/assets/Screen-Shot-2015-07-28-at-22.00.06-215x300.png" alt="Screen Shot 2015-07-28 at 22.00.06" width="215" height="300" class="aligncenter size-medium wp-image-765" /></a></p>
<p>Uh!?! That looks really bad! In fact this is a bug in Playground. To fix this, either don't use Auto Layout, add the statement  <span class="lang:swift decode:true  crayon-inline ">usernameTextField.contentMode = .Redraw</span> or add <span class="lang:swift decode:true  crayon-inline ">usernameTextField.setNeedsDisplay()</span> at the end of the Playground.</p>
<p>If you have to use different code in the Playground than later in the real app the Playground is kind of useless. For a quick and very dirty fix add <span class="lang:swift decode:true  crayon-inline ">usernameTextField.setNeedsDisplay()</span> at the end of the Playground.</p>
<p>The textfield now looks like it should:<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/01/Screen-Shot-2015-07-28-at-22.11.22.png"><img src="{{ site.baseurl }}/assets/Screen-Shot-2015-07-28-at-22.11.22-212x300.png" alt="Screen Shot 2015-07-28 at 22.11.22" width="212" height="300" class="aligncenter size-medium wp-image-769" /></a></p>
<p>After adding a second text field for the password and a button for the login action the code looks like this:</p>
<pre class="lang:swift decode:true ">
import UIKit
import XCPlayground

let hostView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 480))

hostView.layer.borderWidth = 1
hostView.layer.borderColor = UIColor.grayColor().CGColor
hostView.backgroundColor = .whiteColor()

XCPShowView("Host View", view: hostView)

let navigationBar = UINavigationBar(frame: CGRect.zeroRect)
navigationBar.translatesAutoresizingMaskIntoConstraints = false
navigationBar.setItems([UINavigationItem(title: "Login")], animated: false)

let usernameTextField = UITextField(frame: CGRect.zeroRect)
usernameTextField.translatesAutoresizingMaskIntoConstraints = false
usernameTextField.placeholder = "Username"
usernameTextField.borderStyle = .Line

let passwordTextField = UITextField(frame: CGRect.zeroRect)
passwordTextField.translatesAutoresizingMaskIntoConstraints = false
passwordTextField.placeholder = "Password"
passwordTextField.borderStyle = .Line
passwordTextField.secureTextEntry = true

let loginButton = UIButton(type: .System)
loginButton.translatesAutoresizingMaskIntoConstraints = false
loginButton.setTitle("Login", forState: .Normal)

hostView.addSubview(navigationBar)
hostView.addSubview(usernameTextField)
hostView.addSubview(passwordTextField)
hostView.addSubview(loginButton)

let views = ["navigationBar": navigationBar, "name": usernameTextField, "password": passwordTextField, "button": loginButton]
var layoutConstraints = [NSLayoutConstraint]()
layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("|[navigationBar]|", options: [], metrics: nil, views: views)
layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("|-[name(password,button)]-|", options: [], metrics: nil, views: views)
layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("V:|[navigationBar(64)]-20-[name(30)]", options: [], metrics: nil, views: views)
layoutConstraints += NSLayoutConstraint.constraintsWithVisualFormat("V:[name(30)]-10-[password(30)]-20-[button]", options: [.AlignAllLeading, .AlignAllTrailing], metrics: nil, views: views)
NSLayoutConstraint.activateConstraints(layoutConstraints)

hostView.subviews.map { $0.setNeedsDisplay() }
</pre>
<p>The result in the Assistant Editor looks like this:<br />
<a href="http://swift.eltanin.uberspace.de/wp-content/uploads/2015/01/Screen-Shot-2015-07-28-at-22.06.08.png"><img src="{{ site.baseurl }}/assets/Screen-Shot-2015-07-28-at-22.06.08-211x300.png" alt="Screen Shot 2015-07-28 at 22.06.08" width="211" height="300" class="aligncenter size-medium wp-image-766" /></a></p>
