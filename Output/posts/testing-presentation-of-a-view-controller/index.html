<!DOCTYPE html><html><head><meta charset="UTF-8"/><meta name="og:site_name" content="dasdom"/><link rel="canonical" href="https://dasdom.dev/posts/testing-presentation-of-a-view-controller"/><meta name="twitter:url" content="https://dasdom.dev/posts/testing-presentation-of-a-view-controller"/><meta name="og:url" content="https://dasdom.dev/posts/testing-presentation-of-a-view-controller"/><title>Testing The Presentation Of A View Controller | dasdom</title><meta name="twitter:title" content="Testing The Presentation Of A View Controller | dasdom"/><meta name="og:title" content="Testing The Presentation Of A View Controller | dasdom"/><meta name="description" content="It's quite easy to test if a view controller is presented on screen after some action. Here is how this works."/><meta name="twitter:description" content="It's quite easy to test if a view controller is presented on screen after some action. Here is how this works."/><meta name="og:description" content="It's quite easy to test if a view controller is presented on screen after some action. Here is how this works."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to dasdom"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">dasdom</a><nav><ul><li><a class="selected" href="/posts">Posts</a></li><li><a href="/books">Books</a></li><li><a href="/about">About</a></li><li><a href="/imprint">Imprint</a></li><li><a href="/privacy">Privacy</a></li></ul></nav></div></header><div class="wrapper"><p>2 Apr 2019</p><article><div class="content"><h1>Testing The Presentation Of A View Controller</h1><blockquote><p>I'm writing <a href="https://leanpub.com/tddfakebookforios">a book about Test-Driven iOS Development</a> with Swift. It's not a traditional book, it's mainly only the code. If you are like me and seldom read blog posts but rather skim for the code, this book is for you.</p></blockquote><p>Let's say we need to test if an action triggers the presentation of a view controller. The test looks like this:</p><pre><code><span class="keyword">func</span> test_presentationOfViewController() {
  <span class="comment">// Arrange</span>
  <span class="keyword">let</span> window = <span class="type">UIWindow</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">300</span>, height: <span class="number">300</span>))
  <span class="comment">// sut == system under test</span>
  window.<span class="property">rootViewController</span> = sut
  window.<span class="call">makeKeyAndVisible</span>()
    
  <span class="comment">// Act</span>
  sut.<span class="call">showNext</span>()
    
  <span class="comment">// Assert</span>
  <span class="call">XCTAssertTrue</span>(sut.<span class="property">presentedViewController</span> <span class="keyword">is</span> <span class="type">DetailViewController</span>)
}
</code></pre><p>First we have to set the view controller (<code>sut</code>) that presents the other view controller as the <code>rootViewController</code> of a window. Then we need to make the window the key window. This way, the view of the view controller is added to the view hierarchy. If we miss the step, no other view controller can be presented on top of that view controller.</p><p>Next the presentation is triggered. How this is done, depends on the code under test. For simplicity, I assume that there is a method <code>showNext()</code> that triggers the presentation.</p><p>In the end we assert that the presented view controller has the expected type. Depending on the presented view controller, we could also assert that an expected item (user, point of interest, tweet, etc) has been passed to it.</p><p>That's all. Straight forward. The tricky part is to remember to add the view controller under test as the root view controller to a window and make the window the key window.</p><p>Follow me on <a href="https://www.twitter.com/dasdom">Twitter</a>.</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/tdd">TDD</a></li><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/testing">Testing</a></li><li><a href="/tags/unit-tests">Unit Tests</a></li><li><a href="/tags/uiviewcontroller">UIViewController</a></li></ul></article></div><footer><p><a href="https://www.buymeacoffee.com/dasdom">Buy me a coffee</a></p><p><a href="/feed.rss">RSS feed</a><a> | </a><a href="https://twitter.com/dasdom">Twitter</a><a> | </a><a href="https://stackoverflow.com/users/498796/dasdom">StackOverflow</a><a> | </a><a href="https://github.com/dasdom">Github</a><a> | </a><a href="https://pragprog.com/titles/dhios/">My Book</a></p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p></footer></body></html>