<!DOCTYPE html><html><head><meta charset="UTF-8"/><meta name="og:site_name" content="dasdom"/><link rel="canonical" href="https://dasdom.dev/posts/dynamic-type-in-uibuttons"/><meta name="twitter:url" content="https://dasdom.dev/posts/dynamic-type-in-uibuttons"/><meta name="og:url" content="https://dasdom.dev/posts/dynamic-type-in-uibuttons"/><title>Dynamic Type in UIButtos | dasdom</title><meta name="twitter:title" content="Dynamic Type in UIButtos | dasdom"/><meta name="og:title" content="Dynamic Type in UIButtos | dasdom"/><meta name="description" content="How to add support for dynamic type to regular UIButtos."/><meta name="twitter:description" content="How to add support for dynamic type to regular UIButtos."/><meta name="og:description" content="How to add support for dynamic type to regular UIButtos."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to dasdom"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">dasdom</a><nav><ul><li><a class="selected" href="/posts">Posts</a></li><li><a href="/books">Books</a></li><li><a href="/about">About</a></li><li><a href="/imprint">Imprint</a></li><li><a href="/privacy">Privacy</a></li></ul></nav></div></header><div class="wrapper"><p>9. Aug 2019</p><article><div class="content"><h1>Dynamic Type in UIButtos</h1><p>Recently I updated my formulary app after three years of absence from the App Store. Now I try to make it the best formulary app in the App Store again. The best formulary app in 2019 needs to support dynamic type.</p><p>One of the main features of my formulary app is the calculator. For the update I rewrote the UI from scratch using <code>UIButton</code>s and <code>UIStackView</code>s. For the next update I wanted the calculator to support dynamic type. But the naïve approach didn't work.</p><h1>The Naïve Approach</h1><p><code>UIButton</code> has a <code>UILabel</code> subview to hold the title. To set the font of the button you need to set the font of that label.</p><pre><code><span class="keyword">let</span> button = <span class="type">UIButton</span>(type: .<span class="dotAccess">system</span>)
button.<span class="property">titleLabel</span>?.<span class="property">font</span> = .<span class="call">preferredFont</span>(forTextStyle: .<span class="dotAccess">body</span>)
button.<span class="property">titleLabel</span>?.<span class="property">adjustsFontForContentSizeCategory</span> = <span class="keyword">true</span>
</code></pre><p>The last line tells UIKit that the font should be changed whenever the user changes the text size in settings or from Control Center. If the font is changed from small to huge while the app is running, the result looks like this (I added a border around the label for clarification):</p><img src="../../assets/2019-08-09/button_font_small.png" alt="Before the font change"/><img src="../../assets/2019-08-09/button_font_huge.png" alt="After the font change"/><p>So this doesn't work.</p><p>To make dynamic type work in a UIButton, I needed to add a strange hack to a UIButton subclass.</p><h1>Custom Subclass</h1><p>The resizing of the title label works if I use a subclass of <code>UIButton</code> that looks like this:</p><pre><code><span class="keyword">@implementation</span> <span class="type">CalculatorButton</span>

- (void)traitCollectionDidChange:(<span class="type">UITraitCollection</span> *)<span class="call">previousTraitCollection</span> {
  
  <span class="type">NSString</span> *text = <span class="keyword">self</span>.<span class="property">currentTitle</span>;
  
  [<span class="keyword">self</span> setTitle:<span class="keyword">nil</span> forState:<span class="type">UIControlStateNormal</span>];
  [<span class="keyword">self</span> setTitle:text forState:<span class="type">UIControlStateNormal</span>];
}
<span class="keyword">@end</span>
</code></pre><p>If you have any feedback you can find me on <a href="https://twitter.com/dasdom">Twitter</a>.</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/accessibility">Accessibility</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a><a> | </a><a href="https://twitter.com/dasdom">Twitter</a><a> | </a><a href="https://stackoverflow.com/users/498796/dasdom">StackOverflow</a><a> | </a><a href="https://github.com/dasdom">Github</a><a> | </a><a href="https://pragprog.com/titles/dhios/">My Book</a></p></footer></body></html>